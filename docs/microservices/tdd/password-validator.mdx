---
title: "Password Validator - TDD Example"
description: "Learn TDD with a password validator that enforces security rules"
sidebar_position: 2
---

# Password Validator - TDD Example

This example demonstrates TDD with business rules and validation logic. We'll build a password validator that enforces security requirements.

## Requirements

Create a password validator that ensures passwords:
1. Are at least 8 characters long
2. Contain at least one uppercase letter
3. Contain at least one lowercase letter
4. Contain at least one digit
5. Contain at least one special character (!@#$%^&*)
6. Don't contain common weak passwords

## TDD Implementation

### Step 1: Write Failing Tests (Red)

```java
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

public class PasswordValidatorTest {
    
    @Test
    public void testValidPassword() {
        PasswordValidator validator = new PasswordValidator();
        assertTrue(validator.isValid("MyStr0ng!Pass"));
    }
    
    @Test
    public void testPasswordTooShort() {
        PasswordValidator validator = new PasswordValidator();
        assertFalse(validator.isValid("MyStr0!"));
    }
    
    @Test
    public void testPasswordNoUppercase() {
        PasswordValidator validator = new PasswordValidator();
        assertFalse(validator.isValid("mystr0ng!pass"));
    }
    
    @Test
    public void testPasswordNoLowercase() {
        PasswordValidator validator = new PasswordValidator();
        assertFalse(validator.isValid("MYSTR0NG!PASS"));
    }
    
    @Test
    public void testPasswordNoDigit() {
        PasswordValidator validator = new PasswordValidator();
        assertFalse(validator.isValid("MyStrong!Pass"));
    }
    
    @Test
    public void testPasswordNoSpecialChar() {
        PasswordValidator validator = new PasswordValidator();
        assertFalse(validator.isValid("MyStr0ngPass"));
    }
}
```

**Run tests** - they fail because `PasswordValidator` doesn't exist.

### Step 2: Write Minimal Implementation (Green)

```java
public class PasswordValidator {
    public boolean isValid(String password) {
        return false; // Start with simplest implementation
    }
}
```

**Run tests** - most fail, but that's expected. Let's implement step by step.

### Step 3: Implement Length Check

```java
@Test
public void testPasswordTooShort() {
    PasswordValidator validator = new PasswordValidator();
    assertFalse(validator.isValid("MyStr0!"));
}
```

```java
public class PasswordValidator {
    public boolean isValid(String password) {
        if (password == null || password.length() < 8) {
            return false;
        }
        return true; // Temporary - will add more checks
    }
}
```

### Step 4: Add Character Type Checks

```java
public class PasswordValidator {
    public boolean isValid(String password) {
        if (password == null || password.length() < 8) {
            return false;
        }
        
        boolean hasUppercase = password.chars().anyMatch(Character::isUpperCase);
        boolean hasLowercase = password.chars().anyMatch(Character::isLowerCase);
        boolean hasDigit = password.chars().anyMatch(Character::isDigit);
        boolean hasSpecialChar = password.chars()
                .anyMatch(ch -> "!@#$%^&*".indexOf(ch) != -1);
        
        return hasUppercase && hasLowercase && hasDigit && hasSpecialChar;
    }
}
```

**Run tests** - they should pass! âœ…

### Step 5: Add Weak Password Check

```java
@Test
public void testWeakPassword() {
    PasswordValidator validator = new PasswordValidator();
    assertFalse(validator.isValid("password123!"));
    assertFalse(validator.isValid("12345678!"));
    assertFalse(validator.isValid("qwerty123!"));
}
```

```java
public class PasswordValidator {
    private static final String[] WEAK_PASSWORDS = {
        "password", "123456", "qwerty", "abc123", "admin"
    };
    
    public boolean isValid(String password) {
        if (password == null || password.length() < 8) {
            return false;
        }
        
        // Check for weak passwords
        String lowerPassword = password.toLowerCase();
        for (String weak : WEAK_PASSWORDS) {
            if (lowerPassword.contains(weak)) {
                return false;
            }
        }
        
        boolean hasUppercase = password.chars().anyMatch(Character::isUpperCase);
        boolean hasLowercase = password.chars().anyMatch(Character::isLowerCase);
        boolean hasDigit = password.chars().anyMatch(Character::isDigit);
        boolean hasSpecialChar = password.chars()
                .anyMatch(ch -> "!@#$%^&*".indexOf(ch) != -1);
        
        return hasUppercase && hasLowercase && hasDigit && hasSpecialChar;
    }
}
```

### Step 6: Refactor for Better Structure

```java
public class PasswordValidator {
    private static final String[] WEAK_PASSWORDS = {
        "password", "123456", "qwerty", "abc123", "admin"
    };
    private static final String SPECIAL_CHARS = "!@#$%^&*";
    private static final int MIN_LENGTH = 8;
    
    public boolean isValid(String password) {
        if (password == null || password.length() < MIN_LENGTH) {
            return false;
        }
        
        return !isWeakPassword(password) && 
               hasRequiredCharacterTypes(password);
    }
    
    private boolean isWeakPassword(String password) {
        String lowerPassword = password.toLowerCase();
        return Arrays.stream(WEAK_PASSWORDS)
                .anyMatch(lowerPassword::contains);
    }
    
    private boolean hasRequiredCharacterTypes(String password) {
        return hasUppercase(password) && 
               hasLowercase(password) && 
               hasDigit(password) && 
               hasSpecialChar(password);
    }
    
    private boolean hasUppercase(String password) {
        return password.chars().anyMatch(Character::isUpperCase);
    }
    
    private boolean hasLowercase(String password) {
        return password.chars().anyMatch(Character::isLowerCase);
    }
    
    private boolean hasDigit(String password) {
        return password.chars().anyMatch(Character::isDigit);
    }
    
    private boolean hasSpecialChar(String password) {
        return password.chars()
                .anyMatch(ch -> SPECIAL_CHARS.indexOf(ch) != -1);
    }
}
```

## Key TDD Lessons

1. **Test Edge Cases**: Always test boundary conditions and invalid inputs
2. **One Rule at a Time**: Add one validation rule, test it, then move to the next
3. **Refactor for Readability**: Break down complex methods into smaller, focused methods
4. **Business Logic First**: Focus on the business requirements, not implementation details
5. **Maintainable Tests**: Each test should be clear about what it's testing

## Complete Test Suite

```java
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

public class PasswordValidatorTest {
    
    private PasswordValidator validator = new PasswordValidator();
    
    @Test
    public void testValidPassword() {
        assertTrue(validator.isValid("MyStr0ng!Pass"));
    }
    
    @Test
    public void testPasswordTooShort() {
        assertFalse(validator.isValid("MyStr0!"));
    }
    
    @Test
    public void testPasswordNoUppercase() {
        assertFalse(validator.isValid("mystr0ng!pass"));
    }
    
    @Test
    public void testPasswordNoLowercase() {
        assertFalse(validator.isValid("MYSTR0NG!PASS"));
    }
    
    @Test
    public void testPasswordNoDigit() {
        assertFalse(validator.isValid("MyStrong!Pass"));
    }
    
    @Test
    public void testPasswordNoSpecialChar() {
        assertFalse(validator.isValid("MyStr0ngPass"));
    }
    
    @Test
    public void testWeakPassword() {
        assertFalse(validator.isValid("password123!"));
        assertFalse(validator.isValid("12345678!"));
        assertFalse(validator.isValid("qwerty123!"));
    }
    
    @Test
    public void testNullPassword() {
        assertFalse(validator.isValid(null));
    }
}
```

## Next Steps

This example shows how TDD helps build robust validation logic. The next example will demonstrate TDD with state management in a bank account system.